                           --o UPGRADE o--

    ---:::---:::---:::---:::---:::---:::---:::---:::---:::---:::---:::---

////////////////////////////////////////////////////////////////////////////
For installing a fresh WIKINDX with a blank database, read docs/INSTALL.txt.
////////////////////////////////////////////////////////////////////////////

If you are upgrading, read this document carefully.

Upgrading v3.8.x or v4.x database is not supported anymore by this version.
For this case you need to use one of the two stable transition versions and
follow their instructions. After going through these intermediate versions
you can update a second time to a more recent version:

 - v6.0.8 which supports PHP 5.6 minimum.
 - v6.1.0 which supports PHP 7.0 minimum.

If you are upgrading a previous installation of WIKINDX 5.x to 6.x,
simply overwrite the existing installation. Optionally, you can install
the software files in a different folder but see steps 7–9 below
(especially step 9). You should not use the existing config.php file but
should copy config.php.dist to a new config.php. v5.4 moved several
settings to the database: you can copy existing settings from the old
config.php file but should also edit the new settings.  The first
running of WIKINDX will upgrade the database in a single step. You
should also reinstall v6 plugins from the components server as WIKINDX
introduced a components compatibility check and a components manager.

The CURL PHP extension is not mandatory in WIKINDX but is used in some
circumstances. For example, from v5.9.1, components such as plugins and
languages can be managed from the Admin|Components interface if CURL is
installed – without CURL, components must be installed manually by
downloading them from the Sourceforge server. It's not recommend to
disable CURL and manage components by hand.

///////////////////

BACK UP YOUR DATABASE BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATABASE BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATABASE BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATABASE BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATABASE BEFORE ANY UPGRADING!!!!!!!

BACK UP YOUR DATA FILES BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATA FILES BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATA FILES BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATA FILES BEFORE ANY UPGRADING!!!!!!!
BACK UP YOUR DATA FILES BEFORE ANY UPGRADING!!!!!!!


IMPORTANT <<

1/ v6.2.0 or later will automatically upgrade an existing v5.1 or later
WIKINDX database.

2/ If your WIKINDX installation is less than v5.1, you should first
upgrade to v6.0.8 or 6.1.0, convert the database by running one of these
version, then upgrade further. It's assumed that there are very few pre
v5.1 users left if any so this is a code cleanout.  See the section
below.

3/  WIKINDX uses caching in the database _cache table for lists of
creators, keywords etc. For large WIKINDX databases, if you receive
messages such as 'MySQL server has gone away', try increasing
max_allowed_packet in the MySQL server.

4/ If your database is over 1500 resources and you expect to export
(with the importexport plugin) lists of resources of at least this
length, then you should set public $WIKINDX_MEMORY_LIMIT = "64M"; in
config.php in order to avoid memory allocation errors.

>> IMPORTANT

UPGRADING <<

5/ Unzip WIKINDX into a new folder on your web server -- it will create
a wikindx/ folder.

6/ Create a new MySQL database (e.g. 'wikindx5'), GRANT ALL permissions
on it to your wikindx user, dump your current WIKINDX database
(including table structure) then import that dump into your new
database.

7/ Copy wikindx/config.php.dist to wikindx/config.php and edit the
latter (v5.4 moved a lot of configuration options to the database but,
as a minimum, you will need to set the MySQL database access protocols).

8/ Ensure that
'cache/',
'data/',
'components/languages/',
'components/plugins/',
'components/templates/',
'components/styles/',
'components/vendor/'

and the files and folders within these folders are writable by the web
server user (usually 'nobody', 'www-data', or 'daemon').  If you are
running WIKINDX locally on Windows (using something like XAMPP), you can
skip this step as the folders will be writable by default.

9/ If you have attachments in the old wikindxXXX/attachments folder,
copy these to wikindx/data/attachments/. The upgrade process will remove
references to resource attachments in the database if those attachments
are not found in the wikindx/data/attachments/ folder.

10/ Run v5 through your web browser (http://<server>/wikindx) and follow
the instructions there to complete the upgrade. In order to account for
potential PHP timeouts when used on a large database, the database
upgrade takes place over numerous stages.

11/ Finally update officials components from the admin components panel
of your website. If you have created custom components you must adapt
them to keep them working. Particularly in version 5.9.1, the
component.json file is added to describe the component.

   a/ Administrators who have written their own bibliographic styles for
   v3.x should edit and save them in the plug-in adminstyle editor
   (download the plug-in from the WIKINDX Sourceforge page) prior to
   their use as this will add additions and amendments to those styles
   that are required in v4.x and up.
   
   b/ Language localizations from v3.8.x will still work in WIKINDX v5
   (before 5.9.1) but will be missing some messages (replaced
   automatically by English messages). v3.8.x localization files can be
   upgraded to v5 (before 5.9.1) by running them through the
   localization plug-in that can be downloaded from the WIKINDX
   Sourceforge site. From version 5.9.1 the translation system is
   replaced by Gettext. Previous catalogs will no longer work and we do
   not provide a migration script. We encourage you to join the common
   translation project on Transifex.

   c/ Administrators who have designed their own CSS/templates will need
   to do some editing. The templating subsystem has greatly changed in
   order to give template designers a lot more control over the visual
   design of WIKINDX. See wikindx/components/templates/default/ for examples.
   
   d/ To date, each version greatly modifies the interface between the
   core and the plugins. You will probably have to rewrite some of your
   private plugins. We encourage you to contact us to integrate them
   into the official distribution or at least to make yourself known so
   that we have an idea of the impact of the interface modifications.
   
   e/ If you want an embedded spell checker, you need to enable enchant
   extension in your php.ini or .htaccess file. See your webserver
   manual.

PS: However, it may happen that the rewriting of certain resource and
paper links to these images fails when the src attribute of the HTML img
tag does not appear first.

>> UPGRADING

    ---:::---:::---:::---:::---:::---:::---:::---:::---:::---:::---:::---

-- 
Mark Grimshaw-Aagaard
The WIKINDX Team 2020
sirfragalot@users.sourceforge.net
